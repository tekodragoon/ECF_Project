{% block javascript %}
{{ encore_entry_script_tags('expand') }}
{% endblock %}

<div hx-target="this" hx-swap="outerHTML" id="recipe-gestion">
	{{ include('_flash-message.html.twig') }}

	{{ include('_back-button.html.twig', {path: path('app_management_action')}) }}

	<div class="border border-2 border-secondary p-2 mb-6 rounded">
		{% set oldCategory = '' %}
		{% for recipe in recipes %}
			{% if oldCategory != recipe.category %}
				{% set margin = oldCategory == '' ? 'mb-2' : 'my-2' %}
				<div class="flex justify-between items-center p-3 {{ margin }} rounded bg-primary text-white
				no-expand">
					{{ recipe.category }}
					<button class="flex items-center p-1.5 bg-secondary rounded expand">
						<span class="material-symbols-outlined">expand_less</span>
					</button>
				</div>
				{% set oldCategory = recipe.category %}
			{% endif %}
			<div class="grid grid-cols-4 gap-2 items-center recipe-container">
				<div class="col-span-3 border border-2 border-black p-3 rounded">
					{{ recipe.name }}
				</div>
				{{ include('management/recipe/_manage-recipe.html.twig', {id: recipe.id}) }}
			</div>
		{% endfor %}

		<div class="flex justify-end items-center mt-2 no-expand">
			<button hx-get="{{ path('app_management_add-recipe') }}" class="btn-icon-left">
				Ajouter une recette <span class="material-symbols-rounded button-icon">Add</span>
			</button>
		</div>
	</div>

	{{ include('_back-button.html.twig', {path: path('app_management_action')}) }}

</div>